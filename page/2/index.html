<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"xxid.xyz","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default","show_result":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInDown"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="blog">
<meta property="og:url" content="http://xxid.xyz/page/2/index.html">
<meta property="og:site_name" content="blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="grant lee">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://xxid.xyz/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">11</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">14</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">20</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">grant lee</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/f69/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/f69/" class="post-title-link" itemprop="url">qexo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-25 02:27:35" itemprop="dateCreated datePublished" datetime="2023-06-25T02:27:35+00:00">2023-06-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/quxo/" itemprop="url" rel="index"><span itemprop="name">quxo</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          qexo 
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/f69/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/ea2c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/ea2c/" class="post-title-link" itemprop="url">ansible</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ansible/" itemprop="url" rel="index"><span itemprop="name">ansible</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ansible  常用操作</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/ea2c/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/9ef6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/9ef6/" class="post-title-link" itemprop="url">gitlab权限</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/gitlab/" itemprop="url" rel="index"><span itemprop="name">gitlab</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Gitlab权限概念"><a href="#Gitlab权限概念" class="headerlink" title="Gitlab权限概念"></a>Gitlab权限概念</h1><p>用户具有不同的能力，具体取决于他们在特定组或项目中的访问级别。如果用户同时在组的项目和项目本身中，则使用最高权限级别。</p>
<p>在公共和内部项目中，不会强制实施Guest角色。所有用户都可以创建问题，发表评论，克隆或下载项目代码。</p>
<p>当成员离开团队时， 将自动取消分配所有分配的问题和合并请求。</p>
<p>GitLab 管理员获得所有权限。</p>
<h1 id="Gitlab权限列表"><a href="#Gitlab权限列表" class="headerlink" title="Gitlab权限列表"></a>Gitlab权限列表</h1><p>这里要列一下权限分类，因为gitlab的成员权限不单单只有一种。</p>
<ul>
<li><p>项目成员角色</p>
</li>
<li><ul>
<li>Guest - 客人</li>
<li>Reporter - 记者</li>
<li>Developer - 开发者</li>
<li>Master (11.0版本中已重命名为 Maintainer) - 维护者</li>
<li>Owner - 所有者</li>
</ul>
</li>
<li><p>组成员角色</p>
</li>
<li><ul>
<li>Guest - 客人</li>
<li>Reporter - 记者</li>
<li>Developer - 开发者</li>
<li>Master (11.0版本中已重命名为 Maintainer) - 维护者</li>
<li>Owner - 维护者</li>
</ul>
</li>
<li><p>GitLab CI-CD 角色</p>
</li>
<li><ul>
<li>Guest, Reporter - 客人，记者</li>
<li>Developer - 开发者</li>
<li>Maintainer - 维护者</li>
<li>Admin - 管理员</li>
</ul>
</li>
<li><p>工作角色</p>
</li>
<li><ul>
<li>Guest, Reporter - 客人，记者</li>
<li>Developer - 开发者</li>
<li>Maintainer - 维护者</li>
<li>Admin - 管理员</li>
</ul>
</li>
</ul>
<p>一般管理员邀请用户加入到项目里都需要分配权限，如下：</p>
<h1 id="项目成员权限"><a href="#项目成员权限" class="headerlink" title="项目成员权限"></a>项目成员权限</h1><p>注意：在GitLab 11.0中，Master已重命名为Maintainer。</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>Guest</th>
<th>Reporter</th>
<th>Developer</th>
<th>Maintainer</th>
<th>Owner</th>
</tr>
</thead>
<tbody><tr>
<td>创建新问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>创建机密问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看机密问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>留言</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看相关问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看工作列表</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看工作日志</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>下载并浏览作业工件</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看维基页面</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看许可证管理报告</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看安全报告</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>查看项目代码</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>拉项目代码</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>下载项目</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>分配问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>分配合并请求</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>标签问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>标签合并请求</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建代码段</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>管理问题跟踪器</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>管理标签</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>查看提交状态</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>查看容器注册表</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>查看环境</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>查看合并请求列表</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>管理相关问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>锁定问题讨论</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>从漏洞创建问题</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>查看错误跟踪列表</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>锁定合并请求讨论</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建新环境</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>停止环境</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>管理&#x2F;接受合并请求</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建新的合并请求</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建新分支</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>推送到未受保护的分支机构</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>强制推送到不受保护的分支机构</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>删除未受保护的分支</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>添加标签</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>写一个维基</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>取消并重试作业</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建或更新提交状态</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>更新容器注册表</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>删除容器注册表图像</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建&#x2F;编辑&#x2F;删除项目里程碑</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>查看已批准&#x2F;列入黑名单的许可</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>使用安全仪表板</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>解除漏洞</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>应用代码更改建议</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="组成员权限"><a href="#组成员权限" class="headerlink" title="组成员权限"></a>组成员权限</h1><table>
<thead>
<tr>
<th>Action</th>
<th>Guest</th>
<th>Reporter</th>
<th>Developer</th>
<th>Maintainer</th>
<th>Owner</th>
</tr>
</thead>
<tbody><tr>
<td>浏览组</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>编辑组</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>创建子组</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>在组中创建项目</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>管理小组成员</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>删除组</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管理组标签</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>创建&#x2F;编辑&#x2F;删除组里程碑</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr>
<td>查看组史诗</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>创建&#x2F;编辑组史诗</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td>删除组史诗</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>查看组审核事件</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="GitLab-CI-CD权限"><a href="#GitLab-CI-CD权限" class="headerlink" title="GitLab CI &#x2F; CD权限"></a>GitLab CI &#x2F; CD权限</h1><table>
<thead>
<tr>
<th>Action</th>
<th>Guest, Reporter</th>
<th>Developer</th>
<th>Maintainer</th>
<th>Admin</th>
</tr>
</thead>
<tbody><tr>
<td>查看提交和工作</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>重试或取消工作</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>擦除作业工件和跟踪</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>删除项目</td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>创建项目</td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>更改项目配置</td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>添加特定的跑步者</td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>添加共享的运行者</td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>查看系统中的事件</td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>管理界面</td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
</tr>
</tbody></table>
<h1 id="工作权限"><a href="#工作权限" class="headerlink" title="工作权限"></a>工作权限</h1><table>
<thead>
<tr>
<th>Action</th>
<th>Guest, Reporter</th>
<th>Developer</th>
<th>Maintainer</th>
<th>Admin</th>
</tr>
</thead>
<tbody><tr>
<td>运行CI作业</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>从当前项目克隆源和LFS</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>从公共项目克隆源和LFS</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>从内部项目克隆源和LFS</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>私有项目的克隆源和LFS</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>推送源和LFS</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>从当前项目中提取容器图像</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>从公共项目中提取容器图像</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>从内部项目中提取容器图像</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>从私人项目中提取容器图像</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>将容器图像推送到当前项目</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>将容器图像推送到其他项目</td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
</tr>
</tbody></table>
<p>参考资料</p>
<p><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/user/permissions.html">https://docs.gitlab.com/ee/user/permissions.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/8938/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/8938/" class="post-title-link" itemprop="url">gitlab-hook服务端规范提交邮箱</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/gitlab/" itemprop="url" rel="index"><span itemprop="name">gitlab</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="服务端钩子"><a href="#服务端钩子" class="headerlink" title="服务端钩子"></a>服务端钩子</h1><p><a target="_blank" rel="noopener" href="https://github.com/geeeeeeeeek/git-recipes/wiki/5.4-Git-%E9%92%A9%E5%AD%90%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81">https://github.com/geeeeeeeeek/git-recipes/wiki/5.4-Git-%E9%92%A9%E5%AD%90%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81</a></p>
<p><a target="_blank" rel="noopener" href="https://www.git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90">https://www.git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90</a><br>hook可以分为客户端和服务端</p>
<p>这些钩子都允许你对 git push 的不同阶段做出响应。</p>
<ul>
<li>pre-receive</li>
<li>update</li>
<li>post-receive</li>
</ul>
<p>修改custom_hooks_dir路径<br>vi &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb</p>
<pre class="line-numbers language-none"><code class="language-none">gitlab_shell[&#39;custom_hooks_dir&#39;] &#x3D; &#x2F;opt&#x2F;gitlab&#x2F;embedded&#x2F;service&#x2F;gitlab-shell&#x2F;custom_hooks
sudo gitlab-ctl reconfigure 
gitlab-ctl restart&#x2F;&#x2F;重启gitlab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>





<pre class="line-numbers language-none"><code class="language-none">#!&#x2F;bin&#x2F;sh
read  new ref
log&#x3D;$(git log -1 $ref )
em&#x3D;$&#123;log#*&lt;&#125;
email&#x3D;$&#123;em%&gt;*&#125;
temp&#x3D;$&#123;log#*@&#125;
email_suffix&#x3D;$&#123;temp%&gt;*&#125;
if [ $&#123;email_suffix&#125; !&#x3D; &#39;qq.com&#39; ];then
echo &#39;you commit code use email is: &quot;&#39;$email &#39;&quot; the suffix of this email  is :&#39;$&#123;email_suffix&#125;&#39;
Email format error: &quot;&#39;$email&#39;&quot; is not  formal qq OA email
can not commit your code , unless follow these steps to modify your email to OA email
steps:1. git config --global  --replace-all user.email xxx@qq.com
      2.  git commit --amend --author &quot;xxx &lt;xxx@qq.com&gt;&quot; 
         (modify author email to OA email(xxx@qq.com) in your commit infos )
      3. :wq
 
attention: if your commit code use email is different from your OA email (xxx@qq.com) ,your code will not statistical&#39;
exit 1
        else
echo &#39;your email is OA email&#39;
exit 0
fi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/ab8e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/ab8e/" class="post-title-link" itemprop="url">es性能调优</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/" itemprop="url" rel="index"><span itemprop="name">elk</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/es/" itemprop="url" rel="index"><span itemprop="name">es</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="一、配置文件调优"><a href="#一、配置文件调优" class="headerlink" title="一、配置文件调优"></a>一、配置文件调优</h1><p>elasticsearch.yml</p>
<h2 id="内存锁定"><a href="#内存锁定" class="headerlink" title="内存锁定"></a><strong>内存锁定</strong></h2><p>bootstrap.memory_lock：true 锁定堆内存；</p>
<p><strong>zen.discovery</strong></p>
<p>ES是一个P2P类型的分布式系统，使用gossip协议，集群的任意请求都可以发送到集群的任一节点，然后es内部会找到需要转发的节点，并且与之进行通信。在es1.x的版本，es默认是开启组播，启动es之后，可以快速将局域网内集群名称，默认端口的相同实例加入到一个大的集群，后续再es2.x之后，都调整成了单播，避免安全问题和网络风暴；单播discovery.zen.ping.unicast.hosts，建议写入集群内所有的节点及端口，如果新实例加入集群，新实例只需要写入当前集群的实例，即可自动加入到当前集群，之后再处理原实例的配置即可，新实例加入集群，不需要重启原有实例；节点zen相关配置：discovery.zen.ping_timeout：判断master选举过程中，发现其他node存活的超时设置，主要影响选举的耗时，参数仅在加入或者选举 master 主节点的时候才起作用discovery.zen.join_timeout：节点确定加入到集群中，向主节点发送加入请求的超时时间，默认为3sdiscovery.zen.minimum_master_nodes：参与master选举的最小节点数，当集群能够被选为master的节点数量小于最小数量时，集群将无法正常选举。</p>
<h2 id="故障检测（-fault-detection-）"><a href="#故障检测（-fault-detection-）" class="headerlink" title="故障检测（ fault detection ）"></a><strong>故障检测（ fault detection ）</strong></h2><p>两种情况下回进行故障检测，第一种是由master向集群的所有其他节点发起ping，验证节点是否处于活动状态；第二种是：集群每个节点向master发起ping，判断master是否存活，是否需要发起选举。故障检测需要配置以下设置使用形如：discovery.zen.fd.ping_interval 节点被ping的频率，默认为1s。discovery.zen.fd.ping_timeout 等待ping响应的时间，默认为 30s，运行的集群中，master 检测所有节点，以及节点检测 master 是否正常。discovery.zen.fd.ping_retries ping失败&#x2F;超时多少导致节点被视为失败，默认为3。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/modules-discovery-zen.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.x/modules-discovery-zen.html</a></p>
<h2 id="队列数量"><a href="#队列数量" class="headerlink" title="队列数量"></a><strong>队列数量</strong></h2><p>不建议盲目加大es的队列数量，如果是偶发的因为数据突增，导致队列阻塞，加大队列size可以使用内存来缓存数据，如果是持续性的数据阻塞在队列，加大队列size除了加大内存占用，并不能有效提高数据写入速率，反而可能加大es宕机时候，在内存中可能丢失的上数据量。哪些情况下，加大队列size呢？GET &#x2F;_cat&#x2F;thread_pool，观察api中返回的queue和rejected，如果确实存在队列拒绝或者是持续的queue，可以酌情调整队列size。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/modules-threadpool.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.x/modules-threadpool.html</a></p>
<h2 id="内存使用"><a href="#内存使用" class="headerlink" title="内存使用"></a><strong>内存使用</strong></h2><p>设置indices的内存熔断相关参数，根据实际情况进行调整，防止写入或查询压力过高导致OOM，indices.breaker.total.limit: 50%，集群级别的断路器，默认为jvm堆的70%；indices.breaker.request.limit: 10%，单个request的断路器限制，默认为jvm堆的60%；indices.breaker.fielddata.limit: 10%，fielddata breaker限制，默认为jvm堆的60%。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/circuit-breaker.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.x/circuit-breaker.html</a></p>
<p>根据实际情况调整查询占用cache，避免查询cache占用过多的jvm内存，参数为静态的，需要在每个数据节点配置。indices.queries.cache.size: 5%，控制过滤器缓存的内存大小，默认为10%。接受百分比值，5%或者精确值，例如512mb。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/query-cache.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.x/query-cache.html</a></p>
<h2 id="创建shard"><a href="#创建shard" class="headerlink" title="创建shard"></a><strong>创建shard</strong></h2><p>如果集群规模较大，可以阻止新建shard时扫描集群内全部shard的元数据，提升shard分配速度。cluster.routing.allocation.disk.include_relocations: false，默认为true。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/disk-allocator.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.x/disk-allocator.html</a></p>
<h1 id="二、系统层面调优"><a href="#二、系统层面调优" class="headerlink" title="二、系统层面调优"></a>二、系统层面调优</h1><h2 id="jdk版本"><a href="#jdk版本" class="headerlink" title="jdk版本"></a><strong>jdk版本</strong></h2><p>当前根据官方建议，选择匹配的jdk版本；</p>
<h2 id="jdk内存配置"><a href="#jdk内存配置" class="headerlink" title="jdk内存配置"></a><strong>jdk内存配置</strong></h2><p>首先，-Xms和-Xmx设置为相同的值，避免在运行过程中再进行内存分配，同时，如果系统内存小于64G，建议设置略小于机器内存的一半，剩余留给系统使用。同时，jvm heap建议不要超过32G（不同jdk版本具体的值会略有不同），否则jvm会因为内存指针压缩导致内存浪费，详见：<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/heap-sizing.html">https://www.elastic.co/guide/cn/elasticsearch/guide/current/heap-sizing.html</a></p>
<h2 id="交换分区"><a href="#交换分区" class="headerlink" title="交换分区"></a><strong>交换分区</strong></h2><p>关闭交换分区，防止内存发生交换导致性能下降（部分情况下，宁死勿慢）swapoff -a</p>
<h2 id="文件句柄"><a href="#文件句柄" class="headerlink" title="文件句柄"></a><strong>文件句柄</strong></h2><p>Lucene 使用了 大量的 文件。 同时，Elasticsearch 在节点和 HTTP 客户端之间进行通信也使用了大量的套接字，所有这一切都需要足够的文件描述符，默认情况下，linux默认运行单个进程打开1024个文件句柄，这显然是不够的，故需要加大文件句柄数ulimit -n 65536</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.5/setting-system-settings.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.5/setting-system-settings.html</a></p>
<h2 id="mmap"><a href="#mmap" class="headerlink" title="mmap"></a><strong>mmap</strong></h2><p>Elasticsearch 对各种文件混合使用了 NioFs（ 注：非阻塞文件系统）和 MMapFs （ 注：内存映射文件系统）。请确保你配置的最大映射数量，以便有足够的虚拟内存可用于 mmapped 文件。这可以暂时设置：sysctl -w vm.max_map_count&#x3D;262144或者你可以在 &#x2F;etc&#x2F;sysctl.conf 通过修改 vm.max_map_count 永久设置它。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/_file_descriptors_and_mmap.html">https://www.elastic.co/guide/cn/elasticsearch/guide/current/_file_descriptors_and_mmap.html</a></p>
<h2 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a><strong>磁盘</strong></h2><p>如果你正在使用 SSDs，确保你的系统 I&#x2F;O 调度程序是配置正确的。 当你向硬盘写数据，I&#x2F;O 调度程序决定何时把数据实际发送到硬盘。 大多数默认 <em>nix 发行版下的调度程序都叫做</em> <em>cfq**（完全公平队列）。但它是为旋转介质优化的： 机械硬盘的固有特性意味着它写入数据到基于物理布局的硬盘会更高效。这对 SSD 来说是低效的，尽管这里没有涉及到机械硬盘。但是，deadline 或者 noop 应该被使用。deadline 调度程序基于写入等待时间进行优化， noop 只是一个简单的 FIFO 队列。echo noop &gt; &#x2F;sys&#x2F;block&#x2F;sd</em>&#x2F;queue&#x2F;scheduler</p>
<h3 id="磁盘挂载"><a href="#磁盘挂载" class="headerlink" title="磁盘挂载"></a><strong>磁盘挂载</strong></h3><p>mount -o noatime,data&#x3D;writeback,barrier&#x3D;0,nobh &#x2F;dev&#x2F;sd* &#x2F;esdata*其中，noatime，禁止记录访问时间戳；data&#x3D;writeback，不记录journal；barrier&#x3D;0，因为关闭了journal，所以同步关闭barrier；nobh，关闭buffer_head，防止内核影响数据IO</p>
<h3 id="磁盘其他注意事项"><a href="#磁盘其他注意事项" class="headerlink" title="磁盘其他注意事项"></a><strong>磁盘其他注意事项</strong></h3><p>使用 RAID 0。条带化 RAID 会提高磁盘I&#x2F;O，代价显然就是当一块硬盘故障时整个就故障了，不要使用镜像或者奇偶校验 RAID 因为副本已经提供了这个功能。另外，使用多块硬盘，并允许 Elasticsearch 通过多个 path.data 目录配置把数据条带化分配到它们上面。不要使用远程挂载的存储，比如 NFS 或者 SMB&#x2F;CIFS。这个引入的延迟对性能来说完全是背道而驰的。</p>
<h1 id="三、elasticsearch使用方式调优"><a href="#三、elasticsearch使用方式调优" class="headerlink" title="三、elasticsearch使用方式调优"></a>三、elasticsearch使用方式调优</h1><p>当elasticsearch本身的配置没有明显的问题之后，发现es使用还是非常慢，这个时候，就需要我们去定位es本身的问题了，首先祭出定位问题的第一个命令：</p>
<h2 id="hot-threads"><a href="#hot-threads" class="headerlink" title="hot_threads"></a><strong>hot_threads</strong></h2><p>GET &#x2F;_nodes&#x2F;hot_threads&amp;interval&#x3D;30s</p>
<p>抓取30s的节点上占用资源的热线程，并通过排查占用资源最多的TOP线程来判断对应的资源消耗是否正常，一般情况下，bulk，search类的线程占用资源都可能是业务造成的，但是如果是merge线程占用了大量的资源，就应该考虑是不是创建index或者刷磁盘间隔太小，批量写入size太小造成的。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/cluster-nodes-hot-threads.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.x/cluster-nodes-hot-threads.html</a></p>
<h2 id="pending-tasks"><a href="#pending-tasks" class="headerlink" title="pending_tasks"></a><strong>pending_tasks</strong></h2><p>GET &#x2F;_cluster&#x2F;pending_tasks</p>
<p>有一些任务只能由主节点去处理，比如创建一个新的 索引或者在集群中移动分片，由于一个集群中只能有一个主节点，所以只有这一master节点可以处理集群级别的元数据变动。在99.9999%的时间里，这不会有什么问题，元数据变动的队列基本上保持为零。在一些罕见的集群里，元数据变动的次数比主节点能处理的还快，这会导致等待中的操作会累积成队列。这个时候可以通过pending_tasks api分析当前什么操作阻塞了es的队列，比如，集群异常时，会有大量的shard在recovery，如果集群在大量创建新字段，会出现大量的put_mappings的操作，所以正常情况下，需要禁用动态mapping。</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-pending.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-pending.html</a></p>
<h2 id="字段存储"><a href="#字段存储" class="headerlink" title="字段存储"></a><strong>字段存储</strong></h2><p>当前es主要有doc_values，fielddata，storefield三种类型，大部分情况下，并不需要三种类型都存储，可根据实际场景进行调整：当前用得最多的就是doc_values，列存储，对于不需要进行分词的字段，都可以开启doc_values来进行存储（且只保留keyword字段），节约内存，当然，开启doc_values会对查询性能有一定的影响，但是，这个性能损耗是比较小的，而且是值得的；</p>
<p>fielddata构建和管理 100% 在内存中，常驻于 JVM 内存堆，所以可用于快速查询，但是这也意味着它本质上是不可扩展的，有很多边缘情况下要提防，如果对于字段没有分析需求，可以关闭fielddata；</p>
<p>storefield主要用于_source字段，默认情况下，数据在写入es的时候，es会将doc数据存储为_source字段，查询时可以通过_source字段快速获取doc的原始结构，如果没有update，reindex等需求，可以将_source字段disable；</p>
<p>_all，ES在6.x以前的版本，默认将写入的字段拼接成一个大的字符串，并对该字段进行分词，用于支持整个doc的全文检索，在知道doc字段名称的情况下，建议关闭掉该字段，节约存储空间，也避免不带字段key的全文检索；</p>
<p>norms：搜索时进行评分，日志场景一般不需要评分，建议关闭；</p>
<h2 id="tranlog"><a href="#tranlog" class="headerlink" title="tranlog"></a><strong>tranlog</strong></h2><p>Elasticsearch 2.0之后为了保证不丢数据，每次 index、bulk、delete、update 完成的时候，一定触发刷新 translog 到磁盘上，才给请求返回 200 OK。这个改变在提高数据安全性的同时当然也降低了一点性能。如果你不在意这点可能性，还是希望性能优先，可以在 index template 里设置如下参数：</p>
<p>{    “index.translog.durability”: “async”}</p>
<p>index.translog.sync_interval：对于一些大容量的偶尔丢失几秒数据问题也并不严重的集群，使用异步的 fsync 还是比较有益的。比如，写入的数据被缓存到内存中，再每5秒执行一次 fsync ，默认为5s。小于的值100ms是不允许的。index.translog.flush_threshold_size：translog存储尚未安全保存在Lucene中的所有操作。虽然这些操作可用于读取，但如果要关闭并且必须恢复，则需要重新编制索引。此设置控制这些操作的最大总大小，以防止恢复时间过长。达到设置的最大size后，将发生刷新，生成新的Lucene提交点，默认为512mb。</p>
<h2 id="refresh-interval"><a href="#refresh-interval" class="headerlink" title="refresh_interval"></a><strong>refresh_interval</strong></h2><p>执行刷新操作的频率，这会使索引的最近更改对搜索可见，默认为1s，可以设置-1为禁用刷新，对于写入速率要求较高的场景，可以适当的加大对应的时长，减小磁盘io和segment的生成；</p>
<h2 id="禁止动态mapping"><a href="#禁止动态mapping" class="headerlink" title="禁止动态mapping"></a><strong>禁止动态mapping</strong></h2><p>动态mapping的坏处：1.造成集群元数据一直变更，导致集群不稳定；2.可能造成数据类型与实际类型不一致；3.对于一些异常字段或者是扫描类的字段，也会频繁的修改mapping，导致业务不可控。动态mapping配置的可选值及含义如下：true：支持动态扩展，新增数据有新的字段属性时，自动添加对于的mapping，数据写入成功false：不支持动态扩展，新增数据有新的字段属性时，直接忽略，数据写入成功strict：不支持动态扩展，新增数据有新的字段时，报错，数据写入失败</p>
<h2 id="批量写入"><a href="#批量写入" class="headerlink" title="批量写入"></a><strong>批量写入</strong></h2><p>批量请求显然会大大提升写入速率，且这个速率是可以量化的，官方建议每次批量的数据物理字节数5-15MB是一个比较不错的起点，注意这里说的是物理字节数大小。文档计数对批量大小来说不是一个好指标。比如说，如果你每次批量索引 1000 个文档，记住下面的事实：1000 个 1 KB 大小的文档加起来是 1 MB 大。1000 个 100 KB 大小的文档加起来是 100 MB 大。这可是完完全全不一样的批量大小了。批量请求需要在协调节点上加载进内存，所以批量请求的物理大小比文档计数重要得多。从 5–15 MB 开始测试批量请求大小，缓慢增加这个数字，直到你看不到性能提升为止。然后开始增加你的批量写入的并发度（多线程等等办法）。用iostat 、 top 和 ps 等工具监控你的节点，观察资源什么时候达到瓶颈。如果你开始收到 EsRejectedExecutionException ，你的集群没办法再继续了：至少有一种资源到瓶颈了。或者减少并发数，或者提供更多的受限资源（比如从机械磁盘换成 SSD），或者添加更多节点。</p>
<h2 id="索引和shard"><a href="#索引和shard" class="headerlink" title="索引和shard"></a><strong>索引和shard</strong></h2><p>es的索引，shard都会有对应的元数据，且因为es的元数据都是保存在master节点，且元数据的更新是要hang住集群向所有节点同步的，当es的新建字段或者新建索引的时候，都会要获取集群元数据，并对元数据进行变更及同步，此时会影响集群的响应，所以需要关注集群的index和shard数量，建议如下：1.使用shrink和rollover api，相对生成合适的数据shard数；2.根据数据量级及对应的性能需求，选择创建index的名称，形如：按月生成索引：test-YYYYMM，按天生成索引：test-YYYYMMDD；3.控制单个shard的size，正常情况下，日志场景，建议单个shard不大于50GB，线上业务场景，建议单个shard不超过20GB；</p>
<h2 id="segment-merge"><a href="#segment-merge" class="headerlink" title="segment merge"></a><strong>segment merge</strong></h2><p>段合并的计算量庞大， 而且还要吃掉大量磁盘 I&#x2F;O。合并在后台定期操作，因为他们可能要很长时间才能完成，尤其是比较大的段。这个通常来说都没问题，因为大规模段合并的概率是很小的。如果发现merge占用了大量的资源，可以设置：index.merge.scheduler.max_thread_count: 1特别是机械磁盘在并发 I&#x2F;O 支持方面比较差，所以我们需要降低每个索引并发访问磁盘的线程数。这个设置允许 max_thread_count + 2 个线程同时进行磁盘操作，也就是设置为 1 允许三个线程。对于 SSD，你可以忽略这个设置，默认是 Math.min(3, Runtime.getRuntime().availableProcessors() &#x2F; 2) ，对 SSD 来说运行的很好。业务低峰期通过force_merge强制合并segment，降低segment的数量，减小内存消耗；关闭冷索引，业务需要的时候再进行开启，如果一直不使用的索引，可以定期删除，或者备份到hadoop集群；</p>
<h2 id="自动生成-id"><a href="#自动生成-id" class="headerlink" title="自动生成_id"></a><strong>自动生成_id</strong></h2><p>当写入端使用特定的id将数据写入es时，es会去检查对应的index下是否存在相同的id，这个操作会随着文档数量的增加而消耗越来越大，所以如果业务上没有强需求，建议使用es自动生成的id，加快写入速率。</p>
<h2 id="routing"><a href="#routing" class="headerlink" title="routing"></a><strong>routing</strong></h2><p>对于数据量较大的业务查询场景，es侧一般会创建多个shard，并将shard分配到集群中的多个实例来分摊压力，正常情况下，一个查询会遍历查询所有的shard，然后将查询到的结果进行merge之后，再返回给查询端。此时，写入的时候设置routing，可以避免每次查询都遍历全量shard，而是查询的时候也指定对应的routingkey，这种情况下，es会只去查询对应的shard，可以大幅度降低合并数据和调度全量shard的开销。</p>
<h2 id="使用alias"><a href="#使用alias" class="headerlink" title="使用alias"></a><strong>使用alias</strong></h2><p>生产提供服务的索引，切记使用别名提供服务，而不是直接暴露索引名称，避免后续因为业务变更或者索引数据需要reindex等情况造成业务中断。</p>
<h2 id="避免宽表"><a href="#避免宽表" class="headerlink" title="避免宽表"></a><strong>避免宽表</strong></h2><p>在索引中定义太多字段是一种可能导致映射爆炸的情况，这可能导致内存不足错误和难以恢复的情况，这个问题可能比预期更常见，index.mapping.total_fields.limit ，默认值是1000</p>
<h2 id="避免稀疏索引"><a href="#避免稀疏索引" class="headerlink" title="避免稀疏索引"></a><strong>避免稀疏索引</strong></h2><p>因为索引稀疏之后，对应的相邻文档id的delta值会很大，lucene基于文档id做delta编码压缩导致压缩率降低，从而导致索引文件增大，同时，es的keyword，数组类型采用doc_values结构，每个文档都会占用一定的空间，即使字段是空值，所以稀疏索引会造成磁盘size增大，导致查询和写入效率降低。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/8d93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/8d93/" class="post-title-link" itemprop="url">es系统初始化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/" itemprop="url" rel="index"><span itemprop="name">elk</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/es/" itemprop="url" rel="index"><span itemprop="name">es</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>1、vim &#x2F;etc&#x2F;security&#x2F;limits.conf</strong></p>
<pre class="line-numbers language-none"><code class="language-none">*   soft    nofile     65536
*   hard   nofile     65536<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p><strong>#number of threads</strong></p>
<pre class="line-numbers language-none"><code class="language-none">*   soft     nproc     64000
*   hard    nproc    64000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>vim &#x2F;etc&#x2F;security&#x2F;limits.d&#x2F;20-nproc.conf</p>
<p>(处理max number of threads [3885] for user [elk] is too low, increase to at least [4096])</p>
<pre class="line-numbers language-none"><code class="language-none">*     soft  nproc   10240
*     hard  nproc   10240<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p><strong>2、关闭交换分区</strong></p>
<p>swapoff -a</p>
<p>注释掉&#x2F;etc&#x2F;fstab中有swap的一行，</p>
<p>或者在&#x2F;etc&#x2F;sysctl.conf中添加 vm.swappiness&#x3D;1。</p>
<p><strong>3、Enable bootstrap.memory_lock</strong></p>
<p>vim $ES_HOME&#x2F;config&#x2F;elasticsearch.yml</p>
<pre class="line-numbers language-none"><code class="language-none">bootstrap.memory_lock: true<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><strong>添加&#x2F;etc&#x2F;security&#x2F;limits.conf</strong></p>
<pre class="line-numbers language-none"><code class="language-none">* hard memlock unlimited * soft memlock unlimited<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><strong>vim &#x2F;etc&#x2F;systemd&#x2F;system.conf</strong></p>
<pre class="line-numbers language-none"><code class="language-none">DefaultLimitNOFILE&#x3D;65536 DefaultLimitNPROC&#x3D;32000 DefaultLimitMEMLOCK&#x3D;infinity

&#x2F;bin&#x2F;systemctl daemon-reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>4、虚拟内存的配置</p>
<pre class="line-numbers language-none"><code class="language-none">sysctl -w vm.max_map_count&#x3D;262144<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>并在&#x2F;etc&#x2F;sysctl.conf中添加</p>
<pre class="line-numbers language-none"><code class="language-none">echo  &quot;vm.max_map_count&#x3D;262144&quot;&gt;&gt;&#x2F;etc&#x2F;sysctl.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>sysctl -p</p>
<p><strong>常见报错：</strong></p>
<p>ERROR: [2] bootstrap checks failed</p>
<p>[1]: max file descriptors [65535] for elasticsearch process is too low, increase to at least [65536]</p>
<p>[2]: memory locking requested for elasticsearch process but memory is not locked</p>
<p> vim &#x2F;etc&#x2F;security&#x2F;limits.conf</p>
<pre class="line-numbers language-none"><code class="language-none">*   soft    nofile     65536
*   hard   nofile     65536<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>vim &#x2F;etc&#x2F;security&#x2F;limits.conf</p>
<pre class="line-numbers language-none"><code class="language-none">* soft memlock unlimited
* hard memlock unlimited<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p><strong>elastic 系统初始化脚本</strong></p>
<pre class="line-numbers language-none"><code class="language-none">#!&#x2F;bin&#x2F;bash
#elasticsearch安装系统配置初始化脚本
esuser&#x3D;elasitc
create_user() &#123;
if ! grep &quot;^$esuser:&quot; &#x2F;etc&#x2F;passwd ; then
	useradd $esuser
	echo &quot;$esuser&quot; | passwd &quot;$esuser&quot; --stdin &amp;&gt;&#x2F;dev&#x2F;null
	check_ok
else
	echo $esuser already exist!
fi
&#125;


set_system() &#123;
cat &gt;&gt; &#x2F;etc&#x2F;security&#x2F;limits.conf &lt;&lt; EOF
#max open files
*   soft    nofile     65536
*   hard    nofile     65536
#number of threads	
*   soft    nproc    64000
*   hard    nproc    64000
*   soft    memlock unlimited
*   hard    memlock unlimited
EOF

# 配置最大虚拟内存
cat &gt;&gt; &#x2F;etc&#x2F;sysctl.conf &lt;&lt; EOF
vm.max_map_count&#x3D;262144
EOF
# 生效
sysctl -p


cat &gt;&gt; &#x2F;etc&#x2F;systemd&#x2F;system.conf &lt;&lt; EOF
DefaultLimitNOFILE&#x3D;65536
DefaultLimitNPROC&#x3D;32000
DefaultLimitMEMLOCK&#x3D;infinity
EOF
&#x2F;bin&#x2F;systemctl daemon-reload

#关闭swap
swapoff -a
sed -i &#39;s&#x2F;^[^#].*swap&#x2F;#&amp;&#x2F;&#39; &#x2F;etc&#x2F;fstab

&#125;


create_user
set_system
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/8ce5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/8ce5/" class="post-title-link" itemprop="url">ES配置Monitoring监控日志</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/" itemprop="url" rel="index"><span itemprop="name">elk</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/logstash/" itemprop="url" rel="index"><span itemprop="name">logstash</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>982</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>通过配置Monitoring监控日志<br>您可以查看阿里云Elasticsearch（简称ES）实例的监控日志并配置监控索引，避免因监控日志占用空间过大而影响实例的正常使用。</p>
<h2 id="背景信息"><a href="#背景信息" class="headerlink" title="背景信息"></a>背景信息</h2><p>默认情况下，X-Pack监控客户端会每隔10s采集一次集群的监控信息，并保存到对应阿里云ES实例的以.monitoring-*为前缀的索引中。<br>目前主要有.monitoring-es-6-*和.monitoring-kibana-6-*这两种索引，以天为单位滚动创建。采集完的信息会保存在以.monitoring-es-6-为前缀，以当前日期为后缀的索引中。<br>其中.monitoring-es-6-*索引占用磁盘空间较大，主要存放了集群状态、集群统计、节点统计、索引统计等信息。</p>
<h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><p>系统默认保留最近7天的监控索引，此类监控索引（.monitoring-es-6-*）会占用阿里云ES实例的存储空间。索引的大小与实例中的索引个数（包含系统索引）和节点个数有关系。为了避免实例的大部分空间被监控索引占用，可通过以下两种方式进行优化（实际使用中，可以将以上两种方案结合使用）</p>
<ul>
<li><p>设置监控索引的保留天数。可以按照需求自定义监控索引的保留天数，最少保留一天。</p>
<pre class="line-numbers language-none"><code class="language-none">PUT _cluster&#x2F;settings
&#123;&quot;persistent&quot;: &#123;&quot;xpack.monitoring.history.duration&quot;:&quot;1d&quot;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

</li>
<li><p>设置需要采集的监控索引。<br>通过调用API设置哪些索引需要监控以及哪些索引不需要监控，以减少.monitoring-es-6-*索引所占用的磁盘空间。以下命令以禁掉采集系统索引为例。</p>
<pre class="line-numbers language-none"><code class="language-none">PUT _cluster&#x2F;settings
&#123;&quot;persistent&quot;: &#123;&quot;xpack.monitoring.collection.indices&quot;: &quot;*,-.*&quot;&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
<p>说明 禁掉的索引监控信息将不会在Kibana控制台的Montioring页面（索引列表及索引监控信息页面）中显示。但是会在GET _cat&#x2F;indices获取的索引列表中显示，并且可查看索引的状态是open还是close。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/84e2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/84e2/" class="post-title-link" itemprop="url">es常见问题汇总</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/" itemprop="url" rel="index"><span itemprop="name">elk</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/es/" itemprop="url" rel="index"><span itemprop="name">es</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="ES-failed-shard-on-node-XXX-failed-recovery-failure-RecoveryFailedException"><a href="#ES-failed-shard-on-node-XXX-failed-recovery-failure-RecoveryFailedException" class="headerlink" title="ES failed shard on node[XXX]: failed recovery, failure RecoveryFailedException"></a>ES failed shard on node[XXX]: failed recovery, failure RecoveryFailedException</h2><pre class="line-numbers language-none"><code class="language-none">原因是：某节点上的分片尝试恢复5次没有成功，然后就丢弃不管。导致该分片无法恢复。

解决办法：重新恢复失败的分片，一会集群就恢复为green
POST &#x2F;_cluster&#x2F;reroute?retry_failed&#x3D;true
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="es-剩余磁盘空间达到es最小值，添加数据被block"><a href="#es-剩余磁盘空间达到es最小值，添加数据被block" class="headerlink" title="es 剩余磁盘空间达到es最小值，添加数据被block"></a>es 剩余磁盘空间达到es最小值，添加数据被block</h2><pre class="line-numbers language-none"><code class="language-none">
剩余磁盘空间达到es最小值，添加数据被block

查看集群索引是否依然为read_only状态，如果是请执行以下命令，将集群中所有索引的index.blocks.read_only_allow_delete属性设置为null，使集群中不再存在read_only状态的索引。

PUT _all&#x2F;_settings
&#123;&quot;index.blocks.read_only_allow_delete&quot;: null&#125;

删除单个index全部内容，或删除无用的索引
DELETE &#x2F;new_listings_investment
&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125; &#125;

若集群是否依然为Red状态，执行以下命令，查看集群中是否存在未分配的分片。
_cat&#x2F;allocation?v

如果存在未分配的分片，执行以下命令，查看未分配分片的原因。
GET _cluster&#x2F;allocation&#x2F;explain

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">如果使用 ES 的默认设置，ES 为了保持节点可用，设置了几个存储的安全值。分别为：

cluster.routing.allocation.disk.watermark.low: 默认 85% 当达到时，replica 不再写入 .导致新的分片无法分配。
cluster.routing.allocation.disk.watermark.high: 默认 90%. 当达到时Elasticsearch会尝试将对应节点中的分片迁移到其他磁盘使用率比较低的数据节点中
cluster.routing.allocation.disk.watermark.flood_stage: 默认 95% 系统会对Elasticsearch集群中的每个索引强制设置read_only_allow_delete属性，此时索引将无法写入数据，只能读取和删除对应索引<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/3e39/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/3e39/" class="post-title-link" itemprop="url">es备份</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/" itemprop="url" rel="index"><span itemprop="name">elk</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/es/" itemprop="url" rel="index"><span itemprop="name">es</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="快照备份"><a href="#快照备份" class="headerlink" title="快照备份"></a>快照备份</h1><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><pre class="line-numbers language-none"><code class="language-none">PUT _snapshot&#x2F;my_backup 
&#123;
    &quot;type&quot;: &quot;fs&quot;, 
    &quot;settings&quot;: &#123;
        &quot;location&quot;: &quot;&#x2F;mount&#x2F;backups&#x2F;my_backup&quot; 
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>1、给我们的仓库取一个名字my_backup。</li>
<li>2、我们指定仓库的类型应该是一个共享文件系统。比如nfs共享，挂载在&#x2F;mount&#x2F;backups&#x2F;my_backup</li>
<li>3、最后，我们提供一个已挂载的设备作为目的地址。</li>
<li>4、其他的配置<pre class="line-numbers language-none"><code class="language-none">max_snapshot_bytes_per_sec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
当快照数据进入仓库时，这个参数控制这个过程的限流情况。默认是每秒 20mb 。<pre class="line-numbers language-none"><code class="language-none">max_restore_bytes_per_sec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
当从仓库恢复数据时，这个参数控制什么时候恢复过程会被限流以保障你的网络不会被占满。默认是每秒 20mb。<pre class="line-numbers language-none"><code class="language-none">POST _snapshot&#x2F;my_backup&#x2F; 
&#123;
    &quot;type&quot;: &quot;fs&quot;,
    &quot;settings&quot;: &#123;
        &quot;location&quot;: &quot;&#x2F;mount&#x2F;backups&#x2F;my_backup&quot;,
        &quot;max_snapshot_bytes_per_sec&quot; : &quot;50mb&quot;, 
        &quot;max_restore_bytes_per_sec&quot; : &quot;50mb&quot;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
注意我们用的是 POST 而不是 PUT 。这会更新已有仓库的设置。<br>然后添加我们的新设置。</li>
</ul>
<h2 id="快照所有打开的索引"><a href="#快照所有打开的索引" class="headerlink" title="快照所有打开的索引"></a>快照所有打开的索引</h2><pre class="line-numbers language-none"><code class="language-none">PUT _snapshot&#x2F;my_backup&#x2F;snapshot_1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>份所有打开的索引到 my_backup 仓库下 snapshot_1 的快照里</p>
<h2 id="快照指定索引"><a href="#快照指定索引" class="headerlink" title="快照指定索引"></a>快照指定索引</h2><p>这个快照命令现在只会备份 index1 和 index2 了。</p>
<pre class="line-numbers language-none"><code class="language-none">PUT _snapshot&#x2F;my_backup&#x2F;snapshot_2
&#123;
    &quot;indices&quot;: &quot;index_1,index_2&quot;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="列出快照相关的信息"><a href="#列出快照相关的信息" class="headerlink" title="列出快照相关的信息"></a>列出快照相关的信息</h2><p>列出快照snapshot_2的信息</p>
<pre class="line-numbers language-none"><code class="language-none">GET _snapshot&#x2F;my_backup&#x2F;snapshot_2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>获取my_backup仓库下所有的快照信息</p>
<pre class="line-numbers language-none"><code class="language-none">GET _snapshot&#x2F;my_backup&#x2F;_all<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="删除快照"><a href="#删除快照" class="headerlink" title="删除快照"></a>删除快照</h2><p>删除snapshot_2快照</p>
<pre class="line-numbers language-none"><code class="language-none">DELETE _snapshot&#x2F;my_backup&#x2F;snapshot_2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="监控快照进度"><a href="#监控快照进度" class="headerlink" title="监控快照进度"></a>监控快照进度</h2><pre class="line-numbers language-none"><code class="language-none">GET _snapshot&#x2F;my_backup&#x2F;snapshot_2&#x2F;_status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="取消一个快照"><a href="#取消一个快照" class="headerlink" title="取消一个快照"></a>取消一个快照</h2><pre class="line-numbers language-none"><code class="language-none">DELETE _snapshot&#x2F;my_backup&#x2F;snapshot_2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h1 id="从快照恢复"><a href="#从快照恢复" class="headerlink" title="从快照恢复"></a>从快照恢复</h1><p>将snapshot_1恢复。</p>
<pre class="line-numbers language-none"><code class="language-none">POST _snapshot&#x2F;my_backup&#x2F;snapshot_1&#x2F;_restore<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>默认行为是把这个快照里存有的所有索引都恢复，也可以指定这个快照中的具体索引进行恢复。</p>
<h2 id="恢复snapshot-1快照中的index-1索引，并重命名为restored-index-1-只恢复-index-1-索引，忽略快照中存在的其余索引。-查找所提供的模式能匹配上的正在恢复的索引。-然后把它们重命名成替代的模式。"><a href="#恢复snapshot-1快照中的index-1索引，并重命名为restored-index-1-只恢复-index-1-索引，忽略快照中存在的其余索引。-查找所提供的模式能匹配上的正在恢复的索引。-然后把它们重命名成替代的模式。" class="headerlink" title="恢复snapshot_1快照中的index_1索引，并重命名为restored_index_1- 只恢复 index_1 索引，忽略快照中存在的其余索引。- 查找所提供的模式能匹配上的正在恢复的索引。- 然后把它们重命名成替代的模式。"></a>恢复snapshot_1快照中的index_1索引，并重命名为restored_index_1<br><pre class="line-numbers language-none"><code class="language-none">POST &#x2F;_snapshot&#x2F;my_backup&#x2F;snapshot_1&#x2F;_restore
&#123;
    &quot;indices&quot;: &quot;index_1&quot;, 
    &quot;rename_pattern&quot;: &quot;index_(.+)&quot;, 
    &quot;rename_replacement&quot;: &quot;restored_index_$1&quot; 
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>- 只恢复 index_1 索引，忽略快照中存在的其余索引。<br>- 查找所提供的模式能匹配上的正在恢复的索引。<br>- 然后把它们重命名成替代的模式。</h2><h2 id="监控恢复操作"><a href="#监控恢复操作" class="headerlink" title="监控恢复操作"></a>监控恢复操作</h2><pre class="line-numbers language-none"><code class="language-none">GET restored_index_3&#x2F;_recovery<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>或者查看你集群里所有索引，可能包括跟你的恢复进程无关的其他分片移动：</p>
<pre class="line-numbers language-none"><code class="language-none">GET &#x2F;_recovery&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="取消一个恢复"><a href="#取消一个恢复" class="headerlink" title="取消一个恢复"></a>取消一个恢复</h2><p>要取消一个恢复，你需要删除正在恢复的索引。因为恢复进程其实就是分片恢复，发送一个 删除索引 API 修改集群状态，就可以停止恢复进程。比如：</p>
<pre class="line-numbers language-none"><code class="language-none">DELETE &#x2F;restored_index_3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果 restored_index_3 正在恢复中，这个删除命令会停止恢复，同时删除所有已经恢复到集群里的数据。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://xxid.xyz/posts/9317/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grant lee">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/9317/" class="post-title-link" itemprop="url">es常用插件和工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-24 10:32:40" itemprop="dateCreated datePublished" datetime="2023-06-24T10:32:40+00:00">2023-06-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-28 09:34:09" itemprop="dateModified" datetime="2025-03-28T09:34:09+00:00">2025-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/" itemprop="url" rel="index"><span itemprop="name">elk</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/elk/es/" itemprop="url" rel="index"><span itemprop="name">es</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>561</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="运维工具"><a href="#运维工具" class="headerlink" title="运维工具"></a>运维工具</h1><p><strong>ElasticHQ：</strong><a target="_blank" rel="noopener" href="https://github.com/ElasticHQ/elasticsearch-HQ">https://github.com/ElasticHQ/elasticsearch-HQ</a></p>
<p>celebro</p>
<p>kibana</p>
<h1 id="迁移工具"><a href="#迁移工具" class="headerlink" title="迁移工具"></a>迁移工具</h1><p><strong>elasticsearch-migration</strong></p>
<p>github：<a target="_blank" rel="noopener" href="https://github.com/medcl/esm-v1">https://github.com/medcl/esm-v1</a></p>
<p><strong>elasticsearch-dump</strong>：</p>
<p>github ：<a target="_blank" rel="noopener" href="https://github.com/taskrabbit/elasticsearch-dump">https://github.com/taskrabbit/elasticsearch-dump</a></p>
<p><strong>bigdesk：</strong><a target="_blank" rel="noopener" href="https://github.com/lukas-vlcek/bigdesk">https://github.com/lukas-vlcek/bigdesk</a></p>
<p>Elasticsearch-Exporter</p>
<p>logstash</p>
<h1 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h1><p>logstash :<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/logstash/7.2/index.html">https://www.elastic.co/guide/en/logstash/7.2/index.html</a></p>
<p>kibana    :<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/kibana/7.2/index.html">https://www.elastic.co/guide/en/kibana/7.2/index.html</a></p>
<p>elastic    :<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/index.html">https://www.elastic.co/guide/en/elasticsearch/reference/7.2/index.html</a></p>
<p>filebeat  :<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/beats/filebeat/7.2/index.html">https://www.elastic.co/guide/en/beats/filebeat/7.2/index.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">grant lee</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">47k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">43 分钟</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.3/mermaid.min.js","integrity":"sha256-JFptYy4KzJ5OQP+Q9fubNf3cxpPPmZKqUOovyEONKrQ="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
